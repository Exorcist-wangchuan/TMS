<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">


    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/toolmanagesys?useSSL=false"/>
        <property name="username" value="root"/>
        <property name="password" value="123456"/>
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> org.hibernate.dialect.MySQLDialect </prop>
            </props>
        </property>
        <property name="mappingResources">
            <list>
                <value>po/Application.hbm.xml</value>
                <value>po/ProcessRecord.hbm.xml</value>
                <value>po/PurchaseRecord.hbm.xml</value>
                <value>po/User.hbm.xml</value>
            </list>
        </property>
    </bean>

    <!--po类-->
    <bean name="user" class="po.User"/>
    <bean name="application" class="po.Application"/>
    <bean name="purRecord" class="po.PurchaseRecord"/>
    <!--pojo类——不需要存入数据库-->
    <bean name="checkList" class="pojo.CheckList"/>

    <!--dao类-->
    <bean id="baseDAO" class="dao.BaseDAO">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <bean id="userDAO" class="dao.UserDAO" parent="baseDAO"/>
    <bean id="applyDAO" class="dao.ApplyDAO" parent="baseDAO"/>
    <bean id="processDAO" class="dao.ProcessDAO" parent="baseDAO"/>
    <bean id="purDAO" class="dao.PurchaseRecordDAO" parent="baseDAO"/>

    <!--service类-->
    <!--是否需要将参数交给spring?-->
    <bean name="userService" class="service.UserService">
        <property name="userDAO" ref="userDAO"/>
    </bean>
    <bean name="applyService" class="service.ApplyService">
        <property name="applyDAO" ref="applyDAO"/>
    </bean>
    <bean name="purRecordService" class="service.PurchaseRecordService">
        <property name="purchaseRecordDAO" ref="purDAO"/>
    </bean>
    <bean name="processService" class="service.ProcessService">
        <property name="processDAO" ref="processDAO"/>
    </bean>

    <!--action类-->
    <bean name="userAction" class="action.UserAction">
        <property name="userService" ref="userService"/>
    </bean>
    <bean name="applyAction" class="action.ApplyAction">
        <property name="applyService" ref="applyService"/>
    </bean>
    <bean name="purchaseRecordAction" class="action.PurchaseRecordAction">
        <property name="checkList" ref="checkList"/>
        <property name="purchaseRecordService" ref="purRecordService"/>
        <property name="processService" ref="processService"/>
    </bean>


</beans>